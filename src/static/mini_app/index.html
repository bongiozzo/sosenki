<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SOSenki</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <div class="loading" data-i18n="loading">Loading...</div>
    </div>
    
    <!-- Welcome Screen Template (registered user) -->
    <template id="welcome-template">
        <div class="page-container">
            <header class="header">
                <h1 class="brand">S<span class="brand-sos-o">O</span>Süå≤enki</h1>
                <span id="user-name">User</span>
            </header>
            
            <main class="main-menu">
                <nav class="menu-grid">
                    <button class="menu-item" data-action="invest" id="invest-item">
                        <span class="menu-icon">üìà</span>
                        <span class="menu-label" data-i18n="invest">Invest</span>
                    </button>
                    <button class="menu-item" data-action="rule">
                        <span class="menu-icon">üìã</span>
                        <span class="menu-label" data-i18n="rule">Rule</span>
                    </button>
                    <button class="menu-item" data-action="enjoy">
                        <span class="menu-icon">üßò</span>
                        <span class="menu-label" data-i18n="enjoy">Enjoy</span>
                    </button>
                </nav>
            </main>
            
            <!-- Info & Admin Container (rounded) -->
            <div class="info-admin-container">
                <!-- Representative Info (if representing someone) -->
                <section id="representative-info-container" class="representative-info-section"></section>
                
                <!-- User Status Badges -->
                <section id="statuses-container" class="status-badges"></section>
                
                <!-- Stakeholder Link (owners only) -->
                <div id="stakeholder-link-container" class="stakeholder-link-container"></div>
            </div>
            
            <!-- Properties Section (owners only) -->
            <section id="properties-container" class="properties-section">
                <h2 data-i18n="properties">Properties</h2>
                <div id="properties-list"></div>
            </section>

            <!-- Balance Section (owners only) -->
            <section id="balance-container" class="balance-section">
                <div class="section-header">
                    <h2 data-i18n="balance">Balance</h2>
                    <a href="#" class="view-all-link" onclick="navigateToAccounts(event)" data-i18n="view_all">View all ‚Üí</a>
                </div>
                <div class="balance-value">-‚ÇΩ0.00</div>
            </section>
            
            <!-- Transaction List Section -->
            <section id="transactions-section" class="transactions-section">
                <div class="section-header">
                    <h2 data-i18n="transactions">Transactions</h2>
                    <a href="#" class="view-all-link" onclick="navigateToTransactions(event)" data-i18n="view_all">View all ‚Üí</a>
                </div>
                <div id="transactions-list"></div>
            </section>
            
            <!-- Bills Section (all types) -->
            <section id="bills-container" class="bills-section">
                <h2 data-i18n="bills">Bills</h2>
                <div id="bills-list"></div>
            </section>
        </div>
    </template>
    
    <!-- Transactions Page Template -->
    <template id="transactions-template">
        <div class="page-container">
            <header class="header">
                <h1 data-i18n="transactions">Transactions</h1>
            </header>
            
            <main class="transactions-main">
                <div id="transactions-list" class="transactions-list">
                    <!-- Transactions will be rendered here -->
                </div>
            </main>
        </div>
    </template>
    
    <!-- Accounts Page Template -->
    <template id="accounts-template">
        <div class="page-container">
            <header class="header">
                <h1 data-i18n="accounts">Accounts</h1>
            </header>
            
            <main class="accounts-main">
                <div id="accounts-list" class="accounts-list">
                    <!-- Accounts will be rendered here -->
                </div>
            </main>
        </div>
    </template>
    
    <!-- Account Details Page Template -->
    <template id="account-details-template">
        <div class="page-container">
            <header class="header">
                <h1 id="account-details-name">Account</h1>
            </header>
            
            <main class="account-details-main">
                <!-- Balance Section -->
                <section id="account-balance-container" class="balance-section">
                    <h2 data-i18n="balance">Balance</h2>
                    <div class="balance-value" id="account-balance-value">‚ÇΩ0</div>
                </section>
                
                <!-- Transactions Section -->
                <section id="account-transactions-section" class="transactions-section">
                    <h2 data-i18n="transactions">Transactions</h2>
                    <div id="account-transactions-list" class="transactions-list">
                        <!-- Transactions will be rendered here -->
                    </div>
                </section>
                
                <!-- Bills Section -->
                <section id="account-bills-section" class="bills-section">
                    <h2 data-i18n="bills">Bills</h2>
                    <div id="account-bills-list" class="bills-list">
                        <!-- Bills will be rendered here -->
                    </div>
                </section>
            </main>
        </div>
    </template>
    
    <!-- Access Denied Template (non-registered user) -->
    <template id="access-denied-template">
        <div class="access-denied-container">
            <div class="message-box">
                <div class="icon-large">üîí</div>
                <h2 data-i18n="access_denied_title">Access Denied</h2>
                <p class="instruction" data-i18n-html="access_denied_instruction">
                    To request access to SOSenki, send <code>/request</code> to the bot.
                </p>
                <button class="back-button" onclick="window.Telegram.WebApp.close()" data-i18n="close">
                    Close
                </button>
            </div>
        </div>
    </template>
    
    <!-- Error Template -->
    <template id="error-template">
        <div class="error-container">
            <div class="message-box">
                <div class="icon-large">‚ö†Ô∏è</div>
                <h2 data-i18n="something_went_wrong">Something went wrong</h2>
                <p class="error-message" id="error-message" data-i18n="try_again_later">Please try again later.</p>
                <details style="margin-top: 16px; text-align: left; background: #f5f5f5; padding: 8px; border-radius: 4px; font-size: 12px;">
                    <summary style="cursor: pointer; font-weight: 600;" data-i18n="debug_info">Debug Info</summary>
                    <pre id="debug-info" style="overflow-x: auto; margin-top: 8px; white-space: pre-wrap; word-wrap: break-word; font-size: 11px;"></pre>
                    <button class="copy-button" onclick="copyDebugInfo()" style="margin-top: 8px; padding: 6px 12px; background: #0099cc; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;" data-i18n="copy_debug_info">
                        Copy Debug Info
                    </button>
                </details>
                <button class="retry-button" onclick="location.reload()" data-i18n="retry">
                    Retry
                </button>
            </div>
        </div>
    </template>
    
    <!-- Debug Console Panel -->
    <!-- <div id="debug-console" style="position: fixed; bottom: 0; left: 0; right: 0; background: #1a1a1a; color: #00ff00; font-family: monospace; font-size: 11px; max-height: 200px; overflow-y: auto; border-top: 2px solid #00ff00; z-index: 9999; padding: 8px; display: none;">
        <div style="margin-bottom: 8px; font-weight: bold;">DEBUG CONSOLE</div>
        <div id="debug-console-output"></div>
    </div> -->
    
    <script src="app.js"></script>
</body>
</html>
