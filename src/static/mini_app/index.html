<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SOSenki</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <div class="loading">Loading...</div>
    </div>
    
    <!-- Welcome Screen Template (registered user) -->
    <template id="welcome-template">
        <div class="welcome-container">
            <header class="header">
                <h1 class="brand">SOSenki</h1>
                <p class="tagline">Welcome back, <span id="user-name">User</span></p>
            </header>
            
            <main class="main-menu">
                <nav class="menu-grid">
                    <button class="menu-item" data-action="invest" id="invest-item">
                        <span class="menu-icon">üìà</span>
                        <span class="menu-label">Invest</span>
                    </button>
                    <button class="menu-item" data-action="rule">
                        <span class="menu-icon">üìã</span>
                        <span class="menu-label">Rule</span>
                    </button>
                    <button class="menu-item" data-action="enjoy">
                        <span class="menu-icon">üßò</span>
                        <span class="menu-label">Enjoy</span>
                    </button>
                </nav>
            </main>
            
            <!-- User Status Badges -->
            <section id="statuses-container" class="status-badges"></section>
            
            <!-- Stakeholder Link (owners only) -->
            <div id="stakeholder-link-container" class="stakeholder-link-container"></div>
            
            <!-- Existing Debt Section (Future Feature) -->
            <section id="existing-debt-container" class="placeholder-section">
                <h2>Existing Debt</h2>
                <p>Coming soon...</p>
            </section>
            
            <!-- Transaction List Section (Future Feature) -->
            <section id="transaction-list-container" class="placeholder-section">
                <h2>Transaction List</h2>
                <p>Coming soon...</p>
            </section>
        </div>
    </template>
    
    <!-- Access Denied Template (non-registered user) -->
    <template id="access-denied-template">
        <div class="access-denied-container">
            <div class="message-box">
                <div class="icon-large">üîí</div>
                <h2>Access is limited</h2>
                <p class="instruction">
                    To get access to SOSenki, please send <code>/request</code> to the bot.
                </p>
                <button class="back-button" onclick="window.Telegram.WebApp.close()">
                    Close
                </button>
            </div>
        </div>
    </template>
    
    <!-- Error Template -->
    <template id="error-template">
        <div class="error-container">
            <div class="message-box">
                <div class="icon-large">‚ö†Ô∏è</div>
                <h2>Something went wrong</h2>
                <p class="error-message" id="error-message">Please try again later.</p>
                <details style="margin-top: 16px; text-align: left; background: #f5f5f5; padding: 8px; border-radius: 4px; font-size: 12px;">
                    <summary style="cursor: pointer; font-weight: 600;">Debug Info</summary>
                    <pre id="debug-info" style="overflow-x: auto; margin-top: 8px; white-space: pre-wrap; word-wrap: break-word; font-size: 11px;"></pre>
                </details>
                <button class="retry-button" onclick="location.reload()">
                    Retry
                </button>
            </div>
        </div>
    </template>
    
    <script src="app.js"></script>
</body>
</html>
